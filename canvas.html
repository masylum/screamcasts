<!DOCTYPE html>
<html>
  <head>
    <title>Canvas tutorial</title>
    <script type="text/javascript" src="vendor/underscore.js"></script>
    <script type="text/javascript" src="client/gif.js"></script>
    <script type="text/javascript" src="client/hexbase64.js"></script>
    <script type="text/javascript">
      function draw(){
        var canvas = document.getElementById('tutorial');

        if (canvas.getContext){
          var ctx = canvas.getContext('2d');
          ctx.imageSmoothingEnabled = false;

          function randomHue() {
            var hue = Math.floor(Math.random() * 255);
            ctx.fillStyle = "rgb(" + hue + ",0,0)";
            ctx.fillRect (0, 0, 25, 25);
            ctx.fillRect (25, 25, 25, 25);
            ctx.fillStyle = "rgb(0, 0, " + hue +")";
            ctx.fillRect (25, 0, 25, 25);
            ctx.fillRect (0, 25, 25, 25);
            ctx.fillStyle = "rgb(255, 255, 255)";
            ctx.fillRect (15, 15, 20, 20);
          }

          //setInterval(function (){
            randomHue();
            var theImage = ctx.getImageData(0, 0, canvas.width, canvas.height);
            var pixels = theImage.data;
            var data = Gif.encode(pixels, 50, 50, 4).join('');
            document.getElementById('test').src = 'data:image/gif;base64,' + HexBinConverter.hexToBase64(data);
            document.getElementById('hex').innerHTML = data;
            document.getElementById('base64').innerHTML = HexBinConverter.hexToBase64(data);
          //}, 5000);
        }
      }
    </script>
  </head>
  <body onload="draw();">
    <h2>Le canvas</h2>
    <canvas id="tutorial" width="50" height="50"></canvas>
    <h2>Le image</h2>
    <img id='test' src='' />

    <h2>Le hex</h2>
    <div id='hex'></div>

    <h2>Le base64</h2>
    <div id='base64'></div>
  </body>
</html>


